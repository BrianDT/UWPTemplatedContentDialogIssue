<Page
    x:Class="TemplatedContentDialogIssue.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:TemplatedContentDialogIssue.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:not_win="http://uno.ui/not_win"
    mc:Ignorable="d not_win"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid HorizontalAlignment="Center">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

            <TextBlock Text="Heh press the button to display a custom dialog" Margin="20" FontSize="30" TextWrapping="WrapWholeWords"/>

            <StackPanel Grid.Row="1" Orientation="Vertical" HorizontalAlignment="Center" Margin="20,0,20,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">
                    <Button 
                            Command="{x:Bind VM.ShowInplaceProgressCommand}"
                            Margin="0,12,12,0"
                            HorizontalAlignment="Left"
                            IsEnabled="{x:Bind VM.CanShowDiaglogButtons, Mode=OneWay}">
                        <Button.Content>
                            <TextBlock Text="Inplace Custom Progress"
                           TextWrapping="WrapWholeWords"/>
                        </Button.Content>
                    </Button>
                    <Button Content="Inplace Progress with Timer"
                        Command="{x:Bind VM.ShowInplaceProgressWithTimeLimitCommand}"
                        Margin="0,12,0,0"
                        IsEnabled="{x:Bind VM.CanShowDiaglogButtons, Mode=OneWay}"/>

                    <!--<Button Click="Enable_Adjustment" Margin="12,12,0,0"
                            HorizontalAlignment="Right">
                        <Button.Content>
                            <TextBlock Text="Enable manual adjustment"
                           TextWrapping="WrapWholeWords"/>
                        </Button.Content>
                    </Button>-->
                </StackPanel>
                <StackPanel Grid.Column="1">
                    <Button Content="In Code Custom Progress"
                                Command="{x:Bind VM.ShowTemplatedProgressCommand}"
                                Margin="0,12,0,0"
                                HorizontalAlignment="Left"
                                IsEnabled="{x:Bind VM.CanShowDiaglogButtons, Mode=OneWay}"/>
                    <Button Content="In Code Progress with Timer"
                                Command="{x:Bind VM.ShowTemplatedProgressWithTimeLimitCommand}"
                                Margin="0,12,0,0"
                                IsEnabled="{x:Bind VM.CanShowDiaglogButtons, Mode=OneWay}"/>
                </StackPanel>
            </Grid>
                <TextBlock Text="Dialog should be horizontally centered in the red or orange panel below." Margin="20" FontSize="24"
                           TextWrapping="WrapWholeWords"/>
            </StackPanel>

            <StackPanel Grid.Row="2" VerticalAlignment="Bottom" HorizontalAlignment="Stretch">
                <TextBlock Text="{x:Bind VM.LastMessage, Mode=OneWay}"/>
            </StackPanel>

        <StackPanel Grid.Row="3" x:Name="dialogContainer" MinHeight="72" Background="Red"
                    SizeChanged="Container_SizeChanged"
                    Visibility="{x:Bind VM.ShowInPlaceDialogContainer, Mode=OneWay}">
            <controls:ProgressDialog x:Name="progressDialog"
                                        HorizontalAlignment="Center"
                                        UndoCommand="{x:Bind VM.UndoInplaceCommand}"
                                        Margin="0,12,0,12"/>
        </StackPanel>
        <StackPanel Grid.Row="3" x:Name="altDialogContainer" MinHeight="72" Background="Orange"
                    Visibility="{x:Bind VM.ShowTemplatedDialogContainer, Mode=OneWay}">
        </StackPanel>
    </Grid>
</Page>
